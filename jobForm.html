<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="/css/bootstrap.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" />
</head>
<body class="container d-flex align-items-center  bg-body-secondary">
    <main class="w-100 m-auto">
        <div class="card m-3">
            <div class="card-body">
                <form>
                    <div class="row">
                        <div class="col">
                            <h3>Basic Information</h3>
                        </div>
                    </div>
                    <div class="row m-1">
                        <!--First Name-->
                        <div class="col-xl-3 col-lg-4 col-md-6">
                            <div class="row">
                                <div class="col-lg-4">
                                    <label class="form-label">First Name</label>
                                </div>
                                <div class="col-lg-8">
                                    <input type="text" name="firstname" class="form-control">
                                </div>
                            </div>
                        </div>
                        <!--Middle Name-->
                        <div class="col-xl-3 col-lg-4 col-md-6">
                            <div class="row">

                                <div class="col-lg-4">
                                    <label class="form-label">Middle Name</label>
                                </div>
                                <div class="col-lg-8">
                                    <input type="text" name="middlename" class="form-control">
                                </div>
                            </div>
                        </div>
                        <!--Last Name-->
                        <div class="col-xl-3 col-lg-4 col-md-6">
                            <div class="row">

                                <div class="col-lg-4">
                                    <label class="form-label">Last Name</label>
                                </div>
                                <div class="col-lg-8">
                                    <input type="text" name="lastname" class="form-control">
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-6 col-lg-6 ">
                            <div class="row">

                                <div class="col-lg-4">
                                    <label class="form-label">Country</label>
                                </div>
                                <div class="col-lg-8">
                                   <select class="form-control" name="country" id="countryId">
                                    <option>Select the Country</option>
                                    <option value="UK">United Kingdom</option>
                                    <option value="others">Other Country</option>
                                   </select>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-6 col-lg-6 d-none" id="divcountryid">
                            <div class="row">

                                <div class="col-lg-4">
                                    <label class="form-label">If Others</label>
                                </div>
                                <div class="col-lg-8">
                                  <input type="text" name="otherCountry" class="form-control" id="otherCountryId">
                                </div>
                            </div>
                        </div>
                       
                    </div>
      
                    <hr>
                    <div class="row">
                        <div class="col">
                            <h3>Education Information</h3>
                        </div>
                    </div>
                    <div class="row mb-1 education">
                        <div class="col-2">
                            <input type="text" class="form-control" placeholder="Name of your school" />
                        </div>
                        <div class="col-2">
                            <input type="text" class="form-control" placeholder="Year you passed" />
                        </div>
                        <div class="col-2">
                            <input type="text" class="form-control" placeholder="Degree" />
                        </div>
                        <div class="col-2">
                            <input type="text" class="form-control" placeholder="Stuff 1" />
                        </div>
                        <div class="col-2">
                            <input type="text" class="form-control" placeholder="Stuff 2" />
                        </div>
                        
                        <div class="col-2">
                            <button type="button" class="btn cloneeducation" ><i class="bi bi-plus"></i></button>
                            <button type="button" class="btn deleteeducation d-none" ><i class="bi bi-trash"></i></button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</body>
<script src="/js/jquery-3.7.1.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script>
    var elm;
    $(document).ready(function(){
        $('#countryId').on('change',function(){
            var val=$(this).val();
            if(val=='others'){
                $('#divcountryid').removeClass("d-none");
            }
            else{
                $('#divcountryid').addClass("d-none");
            }
        });

        $('input').on('mouseenter', function(){
            $(this).attr("style","border-color:red")
        });
        $('input').on('mouseleave', function(){
            $(this).attr("style","border-color:none")
        });


        $('.cloneeducation').on('click',function(){
           cloneducation($(this));
           
        });

        $('.deleteeducation').on('click', function(){
            $($(this).parents('.education')).remove();
            refreshDeleteBtn();
        });
      

        function cloneducation(education){
            var edx=$(education.parents('div.education'));
            edx.after(edx.clone());
            
            $('.cloneeducation').off('click');
            $('.cloneeducation').on('click',function(){cloneducation(education);});

            $('.deleteeducation').off('click');
            $('.deleteeducation').on('click',function(){ 
                $($(this).parents('.education')).remove();
                refreshDeleteBtn();
            });
            refreshDeleteBtn();
                
        }

        function refreshDeleteBtn(){
              //remove d-none from every delete btn in education 
              debugger;
              for (const iterator of $('.education')) {
                console.log($($(iterator).find('.deleteeducation')));
                const btn=$(iterator).find('button.deleteeducation');
                $(btn).removeClass('d-none');
            }

            //adding d-none in only the first education item so that we dont accidentally delete the item
            const firstEducation=$('.education')[0];
            const firstEducationDeleteBtn=$(firstEducation).find('.deleteeducation');
            $(firstEducationDeleteBtn).addClass('d-none');
        }
    });
</script>
</html>